openapi: 3.1.0
info:
  version: 1.0.0
  title: Example API
  termsOfService: https://example.com/terms/
  contact:
    name: Contact our support
    email: contact@example.com
    url: http://example.com/contact
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  x-logo:
    url: https://redocly.github.io/openapi-template/logo.png
    altText: OpenAPI example logo
  description: |
    This is an **example** API to demonstrate features of the OpenAPI specification.
    # Introduction
    This API definition is intended to to be a good starting point for describing your API in [OpenAPI/Swagger format](https://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.0.2.md).
    It also demonstrates features of the [create-openapi-repo](https://github.com/Redocly/create-openapi-repo) tool and the [Redoc](https://github.com/Redocly/Redoc) documentation engine. Beyond the standard OpenAPI syntax, we use a few  [vendor extensions](https://github.com/Redocly/Redoc/blob/main/docs/redoc-vendor-extensions.md).
    # OpenAPI Specification
    The goal of The OpenAPI Specification is to define a standard, language-agnostic interface to REST APIs which allows both humans and computers to discover and understand the capabilities of the service without access to source code, documentation, or through network traffic inspection. When properly defined via OpenAPI, a consumer can  understand and interact with the remote service with a minimal amount of implementation logic. Similar to what interfaces have done for lower-level programming, OpenAPI removes the guesswork in calling the service.
servers:
  - url: https://{tenant}/api/v1
    variables:
      tenant:
        default: www
        description: Your tenant id
  - url: https://example.com/api/v1
tags:
  - name: Echo
    description: Example echo operations.
  - name: User
    description: Example actions on user accounts.
  - name: Admin
    description: Example operations reserved for administrators.
  - name: Info
    description: Example operations for retrieving information.
  - name: Tag
    description: This is a tag description.
  - name: Beer
    description: Operations related to Beer.
  - name: BeerOrder
    description: Operations related to Beer Orders.
  - name: Customer
    description: Operations related to Customers.
  - name: BeerOrderShipment
    description: Operations related to Beer Order Shipments.
externalDocs:
  description: Find out how to create a GitHub repo for your OpenAPI definition.
  url: https://github.com/Redocly/create-openapi-repo
paths:
  /api/v1/beer:
    get:
      tags:
        - Beer
      summary: List beers (paged)
      description: Returns a paginated list of beers. Optionally filter by beerName (case-insensitive contains).
      operationId: listBeers
      security: []
      parameters:
        - in: query
          name: page
          required: true
          schema:
            type: integer
            minimum: 1
          description: Page number starting from 1.
        - in: query
          name: size
          required: true
          schema:
            type: integer
            minimum: 1
            maximum: 1000
          description: Page size (max 1000).
        - in: query
          name: beerName
          required: false
          schema:
            type: string
          description: Optional case-insensitive substring to filter by beer name.
        - in: query
          name: beerStyle
          required: false
          schema:
            type: string
          description: Optional case-insensitive substring to filter by beer style (e.g. LAGER, IPA, etc.).
      responses:
        '200':
          description: A page of beers.
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    type: array
                    items:
                      $ref: '#/components/schemas/Beer'
                  totalElements:
                    type: integer
                  totalPages:
                    type: integer
                  size:
                    type: integer
                  number:
                    type: integer
                  first:
                    type: boolean
                  last:
                    type: boolean
                  empty:
                    type: boolean
        '400':
          $ref: '#/components/responses/Problem'
    post:
      tags:
        - Beer
      summary: Create a new beer
      description: Creates a new beer record in the system.
      operationId: handlePost
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Beer'
      responses:
        '201':
          description: Beer created.
          headers:
            Location:
              description: URL of the created beer.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Beer'
        '400':
          $ref: '#/components/responses/Problem'
  /api/v1/beer/{beerId}:
    get:
      tags:
        - Beer
      summary: Get beer by ID
      description: Returns a single beer record based on its unique identifier.
      operationId: getBeerById
      security: []
      parameters:
        - name: beerId
          in: path
          required: true
          description: The unique identifier of the beer.
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: The requested beer.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Beer'
        '404':
          $ref: '#/components/responses/Problem'
    put:
      tags:
        - Beer
      summary: Update an existing beer
      description: Updates an existing beer record based on its unique identifier.
      operationId: updateById
      security: []
      parameters:
        - name: beerId
          in: path
          required: true
          description: The unique identifier of the beer to update.
          schema:
            type: integer
            format: int32
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Beer'
      responses:
        '204':
          description: Beer updated.
        '404':
          $ref: '#/components/responses/Problem'
    delete:
      tags:
        - Beer
      summary: Delete a beer
      description: Deletes a beer record based on its unique identifier.
      operationId: deleteById
      security: []
      parameters:
        - name: beerId
          in: path
          required: true
          description: The unique identifier of the beer to delete.
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: Beer deleted.
        '404':
          $ref: '#/components/responses/Problem'
  /api/v1/beerOrder:
    get:
      tags:
        - BeerOrder
      summary: List beer orders
      description: Retrieve a list of beer orders.
      operationId: listBeerOrders
      security: []
      responses:
        '200':
          description: Successfully retrieved list of beer orders.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BeerOrder'
        '400':
          description: Bad request
          $ref: '#/components/responses/Problem'
    post:
      tags:
        - BeerOrder
      summary: Create a beer order
      description: Create a new beer order.
      operationId: createBeerOrder
      security: []
      requestBody:
        required: true
        description: Command object containing the order details to create.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBeerOrderCommand'
            examples:
              simple:
                value:
                  customerRef: REF-001
                  beerOrderLines:
                    - beerId: 1
                      orderQuantity: 2
      responses:
        '201':
          description: Beer order created successfully.
          headers:
            Location:
              description: URI of the created resource.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BeerOrder'
        '400':
          description: Bad request
          $ref: '#/components/responses/Problem'
  /api/v1/beerOrder/{orderId}:
    parameters:
      - name: orderId
        in: path
        description: Identifier of the beer order.
        required: true
        schema:
          type: integer
          format: int32
        example: 101
    get:
      tags:
        - BeerOrder
      summary: Get beer order by ID
      description: Retrieve a single beer order by its identifier.
      operationId: getBeerOrderById
      security: []
      responses:
        '200':
          description: Successfully retrieved the beer order.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BeerOrder'
        '404':
          description: Beer order not found
          $ref: '#/components/responses/Problem'
    patch:
      tags:
        - BeerOrder
      summary: Partial update beer order
      description: Update specific fields of an existing beer order.
      operationId: patchBeerOrder
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchBeerOrderCommand'
      responses:
        '204':
          description: Order updated successfully.
        '400':
          description: Invalid request data
          $ref: '#/components/responses/Problem'
        '404':
          description: Order not found
          $ref: '#/components/responses/Problem'
  /api/v1/customers:
    get:
      summary: List Customers
      operationId: listCustomers
      tags:
        - Customer
      security: []
      responses:
        '200':
          description: A list of customers
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Customer'
        '400':
          $ref: '#/components/responses/Problem'
    post:
      summary: Create Customer
      operationId: createCustomer
      tags:
        - Customer
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCustomerCommand'
      responses:
        '201':
          description: Customer created
          headers:
            Location:
              description: URL of the created customer
              schema:
                type: string
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '400':
          $ref: '#/components/responses/Problem'
  /api/v1/customers/{customerId}:
    get:
      summary: Get Customer by ID
      operationId: getCustomerById
      tags:
        - Customer
      security: []
      parameters:
        - name: customerId
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Customer found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Customer'
        '400':
          $ref: '#/components/responses/Problem'
        '404':
          description: Customer not found
    put:
      summary: Update Customer
      operationId: updateCustomer
      tags:
        - Customer
      security: []
      parameters:
        - name: customerId
          in: path
          required: true
          schema:
            type: integer
            format: int32
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCustomerCommand'
      responses:
        '204':
          description: Customer updated
        '400':
          $ref: '#/components/responses/Problem'
        '404':
          description: Customer not found
    delete:
      summary: Delete Customer
      operationId: deleteCustomer
      tags:
        - Customer
      security: []
      parameters:
        - name: customerId
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: Customer deleted
        '400':
          $ref: '#/components/responses/Problem'
        '404':
          description: Customer not found
  /api/v1/shipments:
    get:
      tags:
        - BeerOrderShipment
      summary: List all shipments
      description: Returns a list of all beer order shipments in the system.
      operationId: listShipments
      security: []
      responses:
        '200':
          description: A list of shipments.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/BeerOrderShipment'
        '400':
          $ref: '#/components/responses/Problem'
    post:
      tags:
        - BeerOrderShipment
      summary: Create a new shipment
      description: Creates a new beer order shipment record in the system.
      operationId: createShipment
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BeerOrderShipment'
      responses:
        '201':
          description: Shipment created.
          headers:
            Location:
              description: URL of the created shipment.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BeerOrderShipment'
        '400':
          $ref: '#/components/responses/Problem'
  /api/v1/shipments/{shipmentId}:
    get:
      tags:
        - BeerOrderShipment
      summary: Get shipment by ID
      description: Returns a single beer order shipment record.
      operationId: getShipmentById
      security: []
      parameters:
        - name: shipmentId
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Shipment found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BeerOrderShipment'
        '400':
          $ref: '#/components/responses/Problem'
        '404':
          description: Shipment not found.
    put:
      tags:
        - BeerOrderShipment
      summary: Update a shipment
      description: Updates an existing beer order shipment record.
      operationId: updateShipment
      security: []
      parameters:
        - name: shipmentId
          in: path
          required: true
          schema:
            type: integer
            format: int32
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BeerOrderShipment'
      responses:
        '204':
          description: Shipment updated.
        '400':
          $ref: '#/components/responses/Problem'
        '404':
          description: Shipment not found.
    delete:
      tags:
        - BeerOrderShipment
      summary: Delete a shipment
      description: Deletes a beer order shipment record.
      operationId: deleteShipment
      security: []
      parameters:
        - name: shipmentId
          in: path
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '204':
          description: Shipment deleted.
        '400':
          $ref: '#/components/responses/Problem'
        '404':
          description: Shipment not found.
components:
  securitySchemes:
    main_auth:
      description: Example description text of the OAuth2 scheme.
      type: oauth2
      flows:
        implicit:
          authorizationUrl: http://example.com/api/oauth/dialog
          scopes:
            read:users: read user info
            write:users: modify or remove users
    api_key:
      description: Example description text of the API key scheme.
      type: apiKey
      in: header
      name: api_key
    basic_auth:
      type: http
      scheme: basic
  schemas:
    Beer:
      type: object
      required:
        - beerName
        - beerStyle
        - upc
        - quantityOnHand
        - price
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier for the beer.
          readOnly: true
          example: 1
        version:
          type: integer
          format: int32
          description: Version number for optimistic locking.
          readOnly: true
          example: 0
        beerName:
          type: string
          description: Name of the beer.
          minLength: 1
          example: Galaxy IPA
        beerStyle:
          type: string
          description: Style of beer (e.g., ALE, PALE ALE, IPA, STOUT).
          minLength: 1
          example: IPA
        upc:
          type: string
          description: Universal Product Code (UPC), a 13-digit number assigned to each unique beer.
          minLength: 1
          example: '1234567890123'
        quantityOnHand:
          type: integer
          format: int32
          description: The quantity of beer currently in stock.
          minimum: 0
          example: 100
        price:
          type: number
          format: double
          description: The price of the beer.
          minimum: 0
          example: 9.99
        createdDate:
          type: string
          format: date-time
          description: The date and time when the beer record was created.
          readOnly: true
          example: '2023-10-27T10:00:00Z'
        updateDate:
          type: string
          format: date-time
          description: The date and time when the beer record was last updated.
          readOnly: true
          example: '2023-10-27T10:00:00Z'
    Problem:
      type: object
      additionalProperties: true
      minProperties: 1
      description: The Problem Details JSON Object [[RFC7807](https://tools.ietf.org/html/rfc7807)].
      properties:
        type:
          type: string
          description: A URI reference [[RFC3986](https://tools.ietf.org/html/rfc3986)] that identifies the problem type. It should provide human-readable documentation for the problem type. When this member is not present, its value is assumed to be "about:blank".
          format: uri
        title:
          type: string
          description: A short, human-readable summary of the problem type. It SHOULD NOT change from occurrence to occurrence of the problem, except for purposes of localization.
        status:
          type: integer
          description: The HTTP status code.
          minimum: 400
          maximum: 599
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of the problem.
        instance:
          type: string
          description: A URI reference that identifies the specific occurrence of the problem.  It may or may not yield further information if dereferenced.
    BeerOrderLine:
      type: object
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier for this line item.
          readOnly: true
          example: 10
        version:
          type: integer
          format: int32
          description: Version number for optimistic locking.
          readOnly: true
          example: 0
        beerId:
          type: integer
          format: int32
          description: Identifier of the beer being ordered.
          minimum: 1
          example: 1
        orderQuantity:
          type: integer
          format: int32
          description: Quantity of the beer requested in this line item.
          minimum: 1
          example: 2
        quantityAllocated:
          type: integer
          format: int32
          description: Quantity that has been allocated/fulfilled for this line item.
          minimum: 0
          readOnly: true
          example: 0
        status:
          type: string
          description: Status of this line item.
          enum:
            - PENDING
            - DELIVERED
          example: PENDING
        createdDate:
          type: string
          format: date-time
          description: The date and time when the line item was created.
          readOnly: true
          example: '2025-10-27T10:00:00Z'
        updateDate:
          type: string
          format: date-time
          description: The date and time when the line item was last updated.
          readOnly: true
          example: '2025-10-27T10:00:00Z'
    BeerOrder:
      type: object
      properties:
        id:
          type: integer
          format: int32
          description: Unique identifier for the beer order.
          readOnly: true
          example: 101
        version:
          type: integer
          format: int32
          description: Version number for optimistic locking.
          readOnly: true
          example: 0
        customerRef:
          type: string
          description: Client-provided reference identifier for the order (e.g., purchase order number).
          minLength: 1
          example: REF-001
        paymentAmount:
          type: number
          format: double
          description: Total payment amount in USD for the entire order.
          minimum: 0
          readOnly: true
          example: 19.98
        status:
          type: string
          description: Overall status of the order.
          enum:
            - PENDING
            - DELIVERED
          example: PENDING
        notes:
          type: string
          description: Ad hoc notes about the order.
          example: Deliver after 5 PM
        beerOrderLines:
          type: array
          description: Line items in this order.
          minItems: 1
          items:
            $ref: '#/components/schemas/BeerOrderLine'
        createdDate:
          type: string
          format: date-time
          description: The date and time when the order was created.
          readOnly: true
          example: '2025-10-27T10:00:00Z'
        updateDate:
          type: string
          format: date-time
          description: The date and time when the order was last updated.
          readOnly: true
          example: '2025-10-27T10:00:00Z'
    CreateBeerOrderLineCommand:
      type: object
      required:
        - beerId
        - orderQuantity
      properties:
        beerId:
          type: integer
          format: int32
          description: Identifier of the beer to order.
          minimum: 1
          example: 1
        orderQuantity:
          type: integer
          format: int32
          description: Quantity of the beer to order.
          minimum: 1
          example: 2
    CreateBeerOrderCommand:
      type: object
      required:
        - customerRef
        - beerOrderLines
      properties:
        customerRef:
          type: string
          description: Client-provided reference identifier for the order (e.g., purchase order number).
          minLength: 1
          example: REF-001
        notes:
          type: string
          description: Ad hoc notes about the order.
          example: Deliver after 5 PM
        beerOrderLines:
          type: array
          description: Line items for the order.
          minItems: 1
          items:
            $ref: '#/components/schemas/CreateBeerOrderLineCommand'
    PatchBeerOrderCommand:
      type: object
      properties:
        customerRef:
          type: string
          description: Client-provided reference identifier for the order (e.g., purchase order number).
          minLength: 1
          example: REF-001
        paymentAmount:
          type: number
          format: double
          description: Total payment amount in USD for the entire order.
          minimum: 0
          example: 19.98
        status:
          type: string
          description: Overall status of the order.
          enum:
            - PENDING
            - DELIVERED
          example: PENDING
        notes:
          type: string
          description: Ad hoc notes about the order.
          example: Deliver after 5 PM
    Customer:
      type: object
      required:
        - name
        - address_line_1
        - city
        - state
        - postal_code
      properties:
        id:
          type: integer
          format: int32
          readOnly: true
        version:
          type: integer
          format: int32
          readOnly: true
        name:
          type: string
          maxLength: 255
        email:
          type: string
          maxLength: 255
        phone_number:
          type: string
          maxLength: 255
        address_line_1:
          type: string
          maxLength: 255
        address_line_2:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 255
        state:
          type: string
          maxLength: 255
        postal_code:
          type: string
          maxLength: 255
        created_date:
          type: string
          format: date-time
          readOnly: true
        update_date:
          type: string
          format: date-time
          readOnly: true
    CreateCustomerCommand:
      type: object
      required:
        - name
        - address_line_1
        - city
        - state
        - postal_code
      properties:
        name:
          type: string
          maxLength: 255
        email:
          type: string
          maxLength: 255
        phone_number:
          type: string
          maxLength: 255
        address_line_1:
          type: string
          maxLength: 255
        address_line_2:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 255
        state:
          type: string
          maxLength: 255
        postal_code:
          type: string
          maxLength: 255
    UpdateCustomerCommand:
      type: object
      required:
        - name
        - address_line_1
        - city
        - state
        - postal_code
      properties:
        name:
          type: string
          maxLength: 255
        email:
          type: string
          maxLength: 255
        phone_number:
          type: string
          maxLength: 255
        address_line_1:
          type: string
          maxLength: 255
        address_line_2:
          type: string
          maxLength: 255
        city:
          type: string
          maxLength: 255
        state:
          type: string
          maxLength: 255
        postal_code:
          type: string
          maxLength: 255
    BeerOrderShipment:
      type: object
      properties:
        id:
          type: integer
          format: int32
          readOnly: true
        version:
          type: integer
          format: int32
          readOnly: true
        beerOrderId:
          type: integer
          format: int32
        shipmentDate:
          type: string
          format: date-time
        carrier:
          type: string
        trackingNumber:
          type: string
        createdDate:
          type: string
          format: date-time
          readOnly: true
        updateDate:
          type: string
          format: date-time
          readOnly: true
  responses:
    Problem:
      description: Problem
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/Problem'
x-tagGroups:
  - name: General
    tags:
      - User
      - Info
      - Echo
      - Beer
      - BeerOrder
      - Customer
      - BeerOrderShipment
